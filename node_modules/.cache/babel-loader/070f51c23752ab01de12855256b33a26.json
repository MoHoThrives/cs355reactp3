{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Download from\"./Download\";import'./Components.css';var FileInput=/*#__PURE__*/function(_React$Component){_inherits(FileInput,_React$Component);function FileInput(props){var _this;_classCallCheck(this,FileInput);_this=_possibleConstructorReturn(this,_getPrototypeOf(FileInput).call(this,props));// this.fileInput = React.createRef();\n_this.delete=function(event){var index=event.target.dataset.index;_this.setState(function(state){var data=_toConsumableArray(state.data);data.splice(index,1);return{data:data};});};_this.checkBox=function(event){var index=event.target.dataset.index;_this.setState(function(state){var data=_toConsumableArray(state.data);var object=state.data[index];object.isChecked=!object.isChecked;data.splice(index,1,object);return{data:data};});console.log(_this.state.data);// this.setState({\n//     data\n// })\n};_this.showFile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var fileName,type,reader;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();//get file name.\nfileName=e.target.files[0].name;// check file type.\ntype=fileName.split(\".\")[1];// read the file contents as plain text.\nreader=new FileReader();reader.onload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var text,obj,lines,csvData,i,arr,parser,doc,results,xmlData,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:text=e.target.result;// console.log(text);\n//todo: add isChecked\nif(type===\"json\"){// JSON.parse() take a json string and turn it into a json object.\nobj=JSON.parse(text);_this.setState({data:obj.Result});// console.log(obj); // return a object { ... }\n// console.log(obj.Result); //return an array [{...}, {....}]\n}else if(type===\"csv\"){lines=text.split(\"\\n\");// console.log(lines);\ncsvData=[];for(i=0;i<lines.length;i++){arr=lines[i].split(\",\");csvData.push({title:arr[0],url:arr[1],description:arr[2],isChecked:false});}_this.setState({data:csvData});}else{parser=new DOMParser();doc=parser.parseFromString(text,\"text/xml\");results=doc.getElementsByTagName(\"result\");xmlData=[];for(_i=0;_i<results.length;_i++){xmlData.push({title:doc.getElementsByTagName(\"title\")[_i].innerHTML,url:doc.getElementsByTagName(\"url\")[_i].innerHTML,description:doc.getElementsByTagName(\"description\")[_i].innerHTML,isChecked:false});}_this.setState({data:xmlData});}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}();reader.readAsText(e.target.files[0]);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={data:[]};return _this;}_createClass(FileInput,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"level1\"},React.createElement(\"h2\",null,\"File Upload\"),React.createElement(\"input\",{className:\"btn btn-outline-light search\",type:\"file\",accept:\".xml,.json,.csv\",onChange:this.showFile}),React.createElement(Download,{data:this.state.data}),React.createElement(\"div\",{className:\"container\"},this.state.data.map(function(data,i){return React.createElement(\"div\",{key:i,className:\"row\"},React.createElement(\"div\",{className:\"col-sm-2\"}),React.createElement(\"div\",{key:i,className:\"col-sm-8\"},React.createElement(\"div\",{className:\"box\"},React.createElement(\"input\",{\"data-index\":i,className:\"checkbox\",type:\"checkbox\",name:\"check\",onChange:_this2.checkBox}),React.createElement(\"h3\",null,data.title),React.createElement(\"h4\",null,React.createElement(\"a\",{href:data.url},data.url)),React.createElement(\"h5\",null,data.description))));})));}}]);return FileInput;}(React.Component);export default FileInput;","map":{"version":3,"sources":["/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/src/components/FileInput.js"],"names":["React","Download","FileInput","props","delete","event","index","target","dataset","setState","state","data","splice","checkBox","object","isChecked","console","log","showFile","e","preventDefault","fileName","files","name","type","split","reader","FileReader","onload","text","result","obj","JSON","parse","Result","lines","csvData","i","length","arr","push","title","url","description","parser","DOMParser","doc","parseFromString","results","getElementsByTagName","xmlData","innerHTML","readAsText","map","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Download from \"./Download\";\nimport './Components.css';\n\nclass FileInput extends React.Component {\n    constructor(props) {\n        super(props);\n        // this.fileInput = React.createRef();\n        this.state = {\n            data: [],\n        }\n    }\n    delete = (event) => {\n        const index = event.target.dataset.index;\n        this.setState(state => {\n            const data = [...state.data]\n            data.splice(index, 1);\n            return{\n                data: data,\n            }\n        })\n    }\n    // a controlled form handles all form changes via state, which is a very React way of doing things.\n    checkBox = (event) => {\n        const index = event.target.dataset.index;\n        this.setState(state => {\n            const data = [...state.data];\n            const object = state.data[index];\n            object.isChecked = !object.isChecked;\n            data.splice(index, 1, object);\n            return {\n                data\n            }\n        })\n\n        console.log(this.state.data);\n        // this.setState({\n        //     data\n        // })\n    }\n\n    // uploadFile = (event) => {\n    //     let file = event.target.files[0];\n    //     console.log(file);\n    //\n    //     let data = new FormData();\n    //     if (file) {\n    //         // data.append sends key value pair.\n    //         data.append('file', file);\n    //         console.log(data);\n    //         // axios.post('/files', data)...\n    //     }\n    // }\n\n    showFile = async (e) => {\n        e.preventDefault();\n        //get file name.\n        const fileName = e.target.files[0].name;\n        // check file type.\n        const type = fileName.split(\".\")[1];\n        // read the file contents as plain text.\n        const reader = new FileReader();\n        reader.onload = async (e) => {\n            const text = (e.target.result);\n            // console.log(text);\n            //todo: add isChecked\n            if (type === \"json\") {\n                // JSON.parse() take a json string and turn it into a json object.\n                let obj = JSON.parse(text);\n                this.setState({\n                    data: obj.Result,\n                })\n                // console.log(obj); // return a object { ... }\n                // console.log(obj.Result); //return an array [{...}, {....}]\n            }\n            else if (type === \"csv\") {\n                const lines = text.split(\"\\n\");\n                // console.log(lines);\n                let csvData = [];\n\n                for (let i = 0; i<lines.length; i++){\n                    let arr = lines[i].split(\",\");\n                    csvData.push({\n                        title: arr[0],\n                        url: arr[1],\n                        description: arr[2],\n                        isChecked: false,\n                    });\n                }\n                this.setState({\n                    data: csvData,\n                })\n            }\n            else{\n                const parser = new DOMParser();\n                let doc = parser.parseFromString(text, \"text/xml\");\n                const results = doc.getElementsByTagName(\"result\");\n\n                let xmlData = [];\n                for (let i = 0; i<results.length; i++){\n                    xmlData.push({\n                        title: doc.getElementsByTagName(\"title\")[i].innerHTML,\n                        url: doc.getElementsByTagName(\"url\")[i].innerHTML,\n                        description: doc.getElementsByTagName(\"description\")[i].innerHTML,\n                        isChecked: false,\n                    });\n                }\n                this.setState({\n                    data: xmlData,\n                })\n            }\n        };\n        reader.readAsText(e.target.files[0])\n    }\n\n    render() {\n        return (\n            <div className=\"level1\">\n                <h2>File Upload</h2>\n                <input className=\"btn btn-outline-light search\" type=\"file\" accept=\".xml,.json,.csv\" onChange={this.showFile}/>\n                {/*passing data as a property to child class*/}\n                <Download data={this.state.data}/>\n\n                <div className=\"container\">\n                    {this.state.data.map((data, i) => {\n                        return (\n                            <div key={i} className=\"row\">\n                                <div className=\"col-sm-2\"></div>\n                                <div key={i} className=\"col-sm-8\">\n                                    <div className=\"box\">\n                                        <input data-index={i} className=\"checkbox\" type=\"checkbox\" name=\"check\" onChange={this.checkBox}/>\n                                        {/*<button className=\"btn btn-outline-primary\" data-index={i} onClick={this.delete}> Delete </button>*/}\n                                        <h3>{data.title}</h3>\n                                        <h4><a href={data.url}>{data.url}</a></h4>\n                                        <h5>{data.description}</h5>\n                                    </div>\n                                </div>\n                            </div>\n                        )})}\n                </div>\n            </div>\n\n        )\n    }\n}\n\nexport default FileInput;"]},"metadata":{},"sourceType":"module"}