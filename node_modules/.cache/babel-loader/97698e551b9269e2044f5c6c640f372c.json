{"ast":null,"code":"import _toConsumableArray from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./Components.css';var Download=/*#__PURE__*/function(_Component){_inherits(Download,_Component);function Download(){var _getPrototypeOf2;var _this;_classCallCheck(this,Download);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Download)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.selectAll=function(){var results=document.getElementsByClassName(\"checkbox\");for(var i=0;i<results.length;i++){results[i].checked=true;}for(var _i=0;_i<_this.props.data.length;_i++){_this.props.data[_i].isChecked=true;}};_this.deselectAll=function(){var results=document.getElementsByClassName(\"checkbox\");for(var i=0;i<results.length;i++){results[i].checked=false;}for(var _i2=0;_i2<_this.props.data.length;_i2++){_this.props.data[_i2].isChecked=false;}};_this.trimData=function(data){// copy the object array.\nvar arr=_toConsumableArray(_this.props.data);var newArr=[];for(var i=0;i<arr.length;i++){if(arr[i].isChecked){newArr.push({title:arr[i].title.trim(),url:arr[i].url.trim(),description:arr[i].description.trim()});}}return newArr;};_this.tocsv=function(data){var csvRows=[];//get the headers\nif(data.length!==0){var headers=Object.keys(data[0]);csvRows.push(headers.join(','));var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{var _loop=function _loop(){var row=_step.value;var values=headers.map(function(header){var escaped=(''+row[header]).replace(/\"/g,'\\\\\"');return\"\\\"\".concat(escaped,\"\\\"\");});csvRows.push(values.join(','));};for(var _iterator=data[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){_loop();}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return csvRows.join('\\n');}else{return csvRows;}};_this.toxml=function(data){var result=\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<results>\\n\";for(var i=0;i<data.length;i++){var title=data[i].title;var url=data[i].url;var description=data[i].description;result=result+\"  <result>\\n    <title>\"+title+\"</title>\\n\"+\"    <url>\"+url+\"</url>\\n\"+\"    <description>\"+description+\"</description>\\n  </result>\\n\";}result+=\"</results>\";return result;};_this.download=function(data,fileName,type){var file=new Blob([data],{type:type});var a=document.createElement('a');a.href=window.URL.createObjectURL(file);a.download=fileName;a.click();};_this.downloadFile=function(e){e.preventDefault();var input=e.target.elements.input.value;var fileType=e.target.elements.options.value;var fileName=input+fileType;var trim=_this.trimData(_this.props.data);// the data has already been stored in states in parent class, retrieve the data from this.props.data\nif(fileType===\".csv\"){var data=_this.tocsv(trim);_this.download(data,fileName,\"text/csv\");}else if(fileType===\".json\"){var _data=JSON.stringify(trim);// const data = this.tojson(this.props.data);\n_this.download(_data,fileName,\"application/json\");}else{var _data2=_this.toxml(trim);_this.download(_data2,fileName,\"text/xml\");}};return _this;}_createClass(Download,[{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"form\",{className:\"downloadFile\",onSubmit:this.downloadFile},React.createElement(\"div\",{id:\"selector\"},React.createElement(\"button\",{id:\"selectall\",className:\"btn btn-light purple-btn mr-sm-1\",type:\"button\",onClick:this.selectAll},\"Select All\"),React.createElement(\"button\",{id:\"deselectall\",className:\"btn btn-light purple-btn\",type:\"button\",onClick:this.deselectAll},\"Deselect All\")),React.createElement(\"button\",{id:\"download\",className:\"btn btn-light mr-sm-1\",type:\"submit\"},\"Download\"),React.createElement(\"input\",{id:\"fileName\",className:\"form-control mr-sm-1\",type:\"text\",placeholder:\"File Name\",name:\"input\",required:\"required\"}),React.createElement(\"select\",{name:\"options\",id:\"fileType\",className:\"custom-select\",required:\"required\"},React.createElement(\"option\",{value:\".json\"},\".JSON\"),React.createElement(\"option\",{value:\".csv\"},\".CSV\"),React.createElement(\"option\",{value:\".xml\"},\".XML\"))));}}]);return Download;}(Component);export default Download;","map":{"version":3,"sources":["/Users/mohanadosman/WebstormProjects/CSCI355/cs355reactp3/src/components/Download.js"],"names":["React","Component","Download","selectAll","results","document","getElementsByClassName","i","length","checked","props","data","isChecked","deselectAll","trimData","arr","newArr","push","title","trim","url","description","tocsv","csvRows","headers","Object","keys","join","row","values","map","header","escaped","replace","toxml","result","download","fileName","type","file","Blob","a","createElement","href","window","URL","createObjectURL","click","downloadFile","e","preventDefault","input","target","elements","value","fileType","options","JSON","stringify"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './Components.css';\n\nclass Download extends Component {\n\n    // constructor(props){\n    //     super(props);\n    // }\n\n    selectAll = () => {\n        const results = document.getElementsByClassName(\"checkbox\");\n        for (let i = 0; i < results.length; i++) {\n            results[i].checked = true;\n        }\n        for (let i = 0; i< this.props.data.length; i++) {\n            this.props.data[i].isChecked = true;\n        }\n    }\n\n    deselectAll = () => {\n        const results = document.getElementsByClassName(\"checkbox\");\n        for (let i = 0; i < results.length; i++) {\n            results[i].checked = false;\n        }\n        for (let i = 0; i< this.props.data.length; i++) {\n            this.props.data[i].isChecked = false;\n        }\n    }\n\n    trimData = (data) => {\n        // copy the object array.\n        const arr = [...this.props.data];\n        let newArr = [];\n        for (let i = 0; i< arr.length; i++) {\n            if(arr[i].isChecked) {\n                newArr.push({\n                    title:arr[i].title.trim(),\n                    url:arr[i].url.trim(),\n                    description:arr[i].description.trim(),\n                });\n            }}\n        return newArr;\n    }\n\n    tocsv = (data) => {\n        const csvRows = [];\n        //get the headers\n        if (data.length !== 0){\n            const headers = Object.keys(data[0]);\n            csvRows.push(headers.join(','));\n\n            for (const row of data) {\n                const values = headers.map(header => {\n                    const escaped = (''+row[header]).replace(/\"/g, '\\\\\"');\n                    return `\"${escaped}\"`;\n                })\n                csvRows.push(values.join(','));\n            }\n            return csvRows.join('\\n');\n        }else{\n            return csvRows;\n        }\n    }\n\n    // toxml = (data) => {\n    //     let result = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<results>\\n\";\n    //     /* */\n    //     for(let i = 0; i<data.length; i++) {\n    //         if (data[i].isChecked) {\n    //             let title = data[i].title.trim();\n    //             let url = data[i].url.trim();\n    //             let description = data[i].description.trim();\n    //             result = result + \"<result>\\n<title>\" + title + \"</title>\\n\" +\n    //                 \"<url>\" + url + \"</url>\\n\" + \"<description>\" +\n    //                 description + \"</description>\\n</result>\\n\";\n    //         }\n    //     }\n    //     result += \"</results>\";\n    //     return result.trim();\n    // };\n\n    toxml = (data) => {\n        let result = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<results>\\n\";\n        for(let i = 0; i<data.length; i++) {\n\n                let title = data[i].title;\n                let url = data[i].url;\n                let description = data[i].description;\n                result = result + \"  <result>\\n    <title>\" + title + \"</title>\\n\" +\n                    \"    <url>\" + url + \"</url>\\n\" + \"    <description>\" +\n                    description + \"</description>\\n  </result>\\n\";\n\n        }\n        result += \"</results>\";\n        return result;\n    }\n\n    download = (data, fileName, type) => {\n        const file = new Blob([data], {type: type});\n        const a = document.createElement('a');\n        a.href = window.URL.createObjectURL(file);\n        a.download = fileName;\n        a.click();\n    }\n\n    downloadFile = (e) => {\n        e.preventDefault();\n        const input = e.target.elements.input.value;\n        const fileType = e.target.elements.options.value;\n        const fileName = input + fileType;\n        const trim = this.trimData(this.props.data);\n\n        // the data has already been stored in states in parent class, retrieve the data from this.props.data\n        if (fileType === \".csv\") {\n            const data = this.tocsv(trim);\n            this.download(data, fileName, \"text/csv\");\n        }\n        else if (fileType === \".json\") {\n            const data = JSON.stringify(trim);\n            // const data = this.tojson(this.props.data);\n            this.download(data, fileName, \"application/json\");\n        }else{\n            const data = this.toxml(trim);\n            this.download(data, fileName, \"text/xml\");\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <form className=\"downloadFile\" onSubmit={this.downloadFile}>\n                    <div id=\"selector\">\n                        <button id=\"selectall\" className=\"btn btn-light purple-btn mr-sm-1\" type=\"button\" onClick={this.selectAll}>Select All</button>\n                        <button id=\"deselectall\" className=\"btn btn-light purple-btn\" type=\"button\" onClick={this.deselectAll}>Deselect All</button>\n                    </div>\n                        <button id=\"download\" className=\"btn btn-light mr-sm-1\" type=\"submit\">Download</button>\n                        <input id=\"fileName\" className=\"form-control mr-sm-1\" type=\"text\" placeholder=\"File Name\" name=\"input\" required=\"required\"/>\n                        <select name=\"options\" id=\"fileType\" className=\"custom-select\" required=\"required\">\n                            <option value=\".json\">.JSON</option>\n                            <option value=\".csv\">.CSV</option>\n                            <option value=\".xml\">.XML</option>\n                        </select>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default Download;"]},"metadata":{},"sourceType":"module"}